var timeMorning = "{{new_message.attributes__schedule_morning_current}}";
var timeEvening = "{{new_message.attributes__schedule_evening_current}}";
var timeAnswer = "{{format_date.date}}";

function timeDiff (valueStart, valueStop)
{
  var timeStart = new Date("01/01/1970 " + valueStart);
  var timeEnd = new Date("01/01/1970 " + valueStop);

  var MinDiff = (timeEnd - timeStart)/1000/60;

  if (MinDiff < 0) /* Если End < Start (12 00 < 14 00, то прибавляем сутки)*/
  {
    MinDiff = 24*60 + MinDiff
  }
  return MinDiff
}

var timeDiffMorEv = timeDiff(timeMorning, timeEvening);
var midMorEv = Math.round(timeDiffMorEv/2);
var timeDiffMorAns = timeDiff (timeMorning, timeAnswer);

var dayPart;
switch (true) {
        case (timeDiffMorAns <= midMorEv): 
          dayPart = "morning"; break;
        case (timeDiffMorAns > midMorEv && timeDiffMorAns<= timeDiffMorEv): 
          dayPart = "evening"; break;
        case (timeDiffMorAns > timeDiffMorEv): 
          dayPart = "night";  break;
    }

resolve(dayPart)
